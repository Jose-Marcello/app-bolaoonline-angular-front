<div class="min-h-screen bg-[#020617] p-2 sm:p-4">
  
  <main class="max-w-[500px] mx-auto space-y-4 pb-10">

    <div class="flex justify-between items-center px-1 mb-6">
      <h1 class="font-black text-white text-base sm:text-lg uppercase tracking-widest">Ranking da Rodada</h1>
      <button (click)="goBack()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-[10px] font-black rounded-full transition transform hover:scale-105 flex items-center gap-2 shadow-lg">
        <mat-icon style="font-size: 16px; width: 16px; height: 16px;">arrow_back</mat-icon> VOLTAR
      </button>
    </div>

    <div *ngIf="isLoading" class="flex flex-col items-center justify-center p-12">
      <mat-spinner color="accent" diameter="45"></mat-spinner>
      <p class="mt-4 text-indigo-400 text-[10px] font-black uppercase tracking-widest">Sincronizando posições...</p>
    </div>

    <div *ngIf="rankingUsuario && !isLoading" 
         class="bg-slate-800/80 text-white rounded-[28px] shadow-2xl p-5 mb-6 border border-indigo-500/40 backdrop-blur-md">
      <div class="flex items-center gap-5">
        <div class="rounded-full shadow-[0_0_15px_#4f46e5] h-12 w-12 flex items-center justify-center font-black text-xl bg-indigo-600">
          {{ rankingUsuario.posicao }}
        </div>
        <div class="flex-grow">
          <p class="text-sm font-black uppercase tracking-tight m-0">{{ rankingUsuario.apelido }}</p>
          <p class="text-[10px] text-emerald-400 font-bold m-0 tracking-widest">{{ rankingUsuario.pontuacao }} PONTOS</p>
        </div>
        <div class="text-right">
          <p *ngIf="pontosAfastado > 0" class="text-sm font-black text-rose-500 m-0">- {{ pontosAfastado }}</p>
          <p *ngIf="pontosAfastado === 0" class="text-sm font-black text-emerald-400 m-0">LÍDER</p>
          <p class="text-[8px] text-slate-500 uppercase font-black tracking-tighter">Distância</p>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading" class="space-y-3">
      <div *ngFor="let apostador of ranking" 
           class="bg-slate-900/60 rounded-[24px] p-4 border border-white/5 transition-all flex items-center gap-4"
           [ngClass]="{'border-indigo-500/50 bg-indigo-950/30 shadow-[0_0_20px_rgba(79,70,229,0.1)]': apostador.apostadorId === apostadorLogadoId}">
        
        <div class="h-10 w-10 flex-shrink-0 flex items-center justify-center rounded-full font-black text-sm shadow-md"
             [ngClass]="{
               'bg-amber-500 text-black shadow-[0_0_12px_#f59e0b]': apostador.posicao === 1,
               'bg-slate-400 text-black': apostador.posicao === 2,
               'bg-orange-700 text-white': apostador.posicao === 3,
               'bg-slate-800 text-slate-400 border border-white/10': apostador.posicao > 3
             }">
          {{ apostador.posicao }}
        </div>

        <div class="flex-grow min-w-0">
          <p class="text-[11px] font-black truncate uppercase text-white tracking-tight">{{ apostador.apelido }}</p>
          <p class="text-[8px] text-slate-500 font-bold uppercase tracking-tighter">{{ apostador.dataAtualizacao | date:'dd/MM HH:mm' }}</p>
        </div>

        <div class="text-right">
          <p class="text-base font-[900] leading-none italic" 
             [ngClass]="apostador.apostadorId === apostadorLogadoId ? 'text-white' : 'text-emerald-500'">
            {{ apostador.pontuacao }}
          </p>
          <p class="text-[7px] font-black uppercase text-slate-500 tracking-widest mt-1">Pontos</p>
        </div>
      </div>
    </div>
  </main>
</div>