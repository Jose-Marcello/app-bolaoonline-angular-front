<div class="h-screen w-screen flex items-center justify-center bg-cover bg-center" 
     style="background-image: url('assets/images/fundobolao.png');">
     
  <div class="max-w-xl w-full p-8 rounded-lg shadow-2xl space-y-6 text-white mx-auto" 
       style="background-color: rgba(45, 45, 45, 0.95); border: 1px solid #444; border-radius: 1rem; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);">
    
    <div class="text-center">
      <div class="flex flex-col items-center mb-6">
        <span class="inline-block rounded-full overflow-hidden bg-gray-200" 
              style="width: 120px; height: 120px; border: 3px solid #81C784;">
          <img *ngIf="fotoPerfilPreviewUrl" [src]="fotoPerfilPreviewUrl" alt="Foto de Perfil" class="h-full w-full object-cover">
          <svg *ngIf="!fotoPerfilPreviewUrl" class="h-full w-full text-gray-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 20.993c-.34-.995-2.007-4.102-5.748-4.321C16.326 16.275 14.59 16 12 16s-4.326.275-6.252.672C2.007 16.891.34 20.006 0 20.993v2.016h24v-2.016zM12 14c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
          </svg>
        </span>
        
        <label for="fileInput" class="mt-4 bg-bolao-green-dark py-2 px-3 rounded-md shadow-sm text-sm font-bold text-white hover:bg-opacity-90 cursor-pointer transition-all duration-200">
          Carregar Foto do Perfil!!
        </label>
        <input #fileInput id="fileInput" name="fotoPerfil" type="file" (change)="onFileSelected($event)" class="sr-only">
      </div>
      
      <h2 class="text-3xl font-extrabold text-white mb-4">Meu Perfil</h2>
    </div>

    <form [formGroup]="perfilForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="space-y-4">
        <div>
          <input formControlName="apelido" type="text" placeholder="Apelido"
                 class="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-white bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-bolao-green-light">
        </div>

        <div>
          <input formControlName="celular" type="text" placeholder="Celular (apenas números)"
                 class="appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-500 text-white bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-bolao-green-light">
        </div>
      </div>

      <div class="flex flex-col sm:flex-row gap-4 mt-6">
    <button type="button" (click)="voltar()"
            class="w-full sm:w-1/3 flex justify-center py-2 px-4 border border-gray-500 text-sm font-bold rounded-md text-gray-300 hover:bg-zinc-700 transition-all duration-200">
      Voltar
    </button>

    <button type="submit" 
        [disabled]="perfilForm.invalid || isLoading"
        [ngStyle]="{'background-color': (perfilForm.invalid || isLoading) ? '#4b5563' : '#15803d'}"
        class="w-full sm:w-2/3 flex justify-center items-center py-2 px-4 border border-transparent text-sm font-bold rounded-md text-white transition-all duration-300 shadow-lg">
   <mat-spinner *ngIf="isLoading" [diameter]="20" class="mr-2"></mat-spinner>
   {{ isLoading ? 'Gravando...' : 'Salvar Alterações' }}
</button>
</div>
    </form>

    <hr class="my-6 border-gray-600">
    
    <h3 class="text-xl font-bold text-white mb-4 text-center">Trocar Endereço de E-mail</h3>
    <form [formGroup]="emailForm" (ngSubmit)="onChangeEmail()" class="space-y-4">
        <input formControlName="newEmail" type="email" placeholder="Novo endereço de e-mail"
               class="appearance-none rounded-md block w-full px-3 py-2 border border-gray-600 text-white bg-zinc-800 focus:ring-bolao-green-light">

        <input formControlName="currentPassword" type="password" placeholder="Sua senha atual"
               class="appearance-none rounded-md block w-full px-3 py-2 border border-gray-600 text-white bg-zinc-800 focus:ring-bolao-green-light">

        <button type="submit" [disabled]="emailForm.invalid || isEmailLoading"
                class="w-full py-2 px-4 font-bold rounded-md text-white bg-red-700 hover:bg-red-800 disabled:opacity-50 transition-all">
          Solicitar Troca de E-mail
        </button>
    </form>
  </div>
</div>