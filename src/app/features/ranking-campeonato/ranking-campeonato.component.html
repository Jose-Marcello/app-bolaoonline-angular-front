<style>
  /* 1. PALETA DE CORES DO PÓDIO (NEON) */
  .posicao-1 { background-color: #fbbf24 !important; color: #000 !important; box-shadow: 0 0 15px rgba(251, 191, 36, 0.4); } 
  .posicao-2 { background-color: #94a3b8 !important; color: #000 !important; } 
  .posicao-3 { background-color: #b45309 !important; color: #fff !important; } 

  /* 2. EFEITOS DE CARD GRAFITE */
  .ranking-card-v6 { 
    background: rgba(30, 41, 59, 0.6) !important; 
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.05) !important;
    border-radius: 24px !important;
    transition: transform 0.2s ease;
  }
  .ranking-card-v6.highlighted {
    background: rgba(79, 70, 229, 0.2) !important;
    border: 1px solid rgba(129, 140, 248, 0.4) !important;
  }
</style>

<div class="min-h-screen bg-[#020617] p-2 sm:p-4">
  
  <main class="max-w-[500px] mx-auto space-y-4 pb-10">

    <div class="flex justify-between items-center px-1 mb-6">
      <h1 class="font-black text-white text-base sm:text-lg uppercase tracking-widest m-0">
        Ranking do CAMPEONATO
      </h1>
      <button (click)="goBack()"
        class="px-4 py-2 text-[10px] bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-full shadow-lg transition transform hover:scale-105 flex items-center gap-2">
        <mat-icon style="font-size: 16px; width: 16px; height: 16px;">arrow_back</mat-icon> VOLTAR
      </button>
    </div>

    <div *ngIf="isLoading" class="flex flex-col items-center justify-center p-12">
      <mat-spinner color="accent" diameter="45"></mat-spinner>
      <p class="mt-4 text-indigo-400 text-[10px] font-black uppercase tracking-widest">Processando Classificação...</p>
    </div>

    <div *ngIf="rankingUsuario && !isLoading" 
         class="bg-slate-800/80 text-white rounded-[32px] shadow-2xl p-5 mb-8 border border-indigo-500/40 backdrop-blur-md">
      <div class="flex items-center gap-4">
        <div class="w-12 h-12 rounded-full flex items-center justify-center font-black text-xl shadow-lg"
             [ngClass]="{'posicao-1': rankingUsuario.posicao === 1, 'posicao-2': rankingUsuario.posicao === 2, 'posicao-3': rankingUsuario.posicao === 3, 'bg-indigo-600': rankingUsuario.posicao > 3}">
          {{ rankingUsuario.posicao }}
        </div>
        
        <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-white/10 bg-slate-700 flex-shrink-0">
          <img *ngIf="rankingUsuario.fotoPerfil" [src]="getFotoPerfilUrl(rankingUsuario.fotoPerfil)" class="w-full h-full object-cover">
          <mat-icon *ngIf="!rankingUsuario.fotoPerfil" class="scale-125 text-slate-500 flex items-center justify-center h-full w-full">person</mat-icon>
        </div>

        <div class="flex-grow">
          <p class="text-sm font-black text-white m-0 uppercase leading-none tracking-tight">{{ rankingUsuario.apelido }}</p>
          <p class="text-[10px] text-indigo-300 font-bold mt-1 uppercase">Sua Pontuação: {{ rankingUsuario.pontuacao }} PTS</p>
        </div>

        <div class="text-right">
          <p *ngIf="pontosAfastado > 0" class="text-sm font-black text-rose-500 m-0">- {{ pontosAfastado }}</p>
          <p *ngIf="pontosAfastado === 0" class="text-sm font-black text-emerald-400 m-0">LÍDER</p>
          <p class="text-[8px] text-slate-500 uppercase font-black tracking-tighter">Distância</p>
        </div>
      </div>
    </div>

    <div *ngIf="!isLoading" class="space-y-3">
      <div *ngFor="let apostador of ranking" 
           class="ranking-card-v6 p-4 flex items-center gap-4"
           [ngClass]="{'highlighted': apostador.apostadorId === apostadorLogadoId}">
        
        <div class="w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center font-black text-sm shadow-md"
             [ngClass]="{'posicao-1': apostador.posicao === 1, 'posicao-2': apostador.posicao === 2, 'posicao-3': apostador.posicao === 3, 'bg-slate-800 text-slate-400 border border-white/5': apostador.posicao > 3}">
          {{ apostador.posicao }}
        </div>

        <div class="w-10 h-10 rounded-full overflow-hidden bg-slate-800/50 flex-shrink-0 border border-white/5">
          <img *ngIf="apostador.fotoPerfil" [src]="getFotoPerfilUrl(apostador.fotoPerfil)" class="w-full h-full object-cover">
          <mat-icon *ngIf="!apostador.fotoPerfil" class="text-slate-600 scale-90">person</mat-icon>
        </div>

        <div class="flex-grow min-w-0">
          <p class="text-[11px] font-black truncate uppercase text-white tracking-tight">
            {{ apostador.apelido }}
          </p>
          <p class="text-[8px] text-slate-500 font-bold uppercase tracking-tighter">
            Atualizado: {{ apostador.dataAtualizacao | date:'dd/MM HH:mm' }}
          </p>
        </div>

        <div class="text-right">
          <p class="text-base font-[900] leading-none italic" 
             [ngClass]="apostador.apostadorId === apostadorLogadoId ? 'text-white' : 'text-emerald-500'">
            {{ apostador.pontuacao }}
          </p>
          <p class="text-[7px] font-black uppercase text-slate-500 tracking-widest mt-1">Pontos</p>
        </div>
      </div>
    </div>

  </main>
</div>