<div style="height: 100vh; width: 100%; display: flex; flex-direction: column; background-image: url('assets/images/fundobolao.png'); background-size: cover; background-position: center; overflow: hidden;">

  <div style="padding: 16px; flex-shrink: 0;">
    <div style="width: 100%; padding: 12px; background: rgba(30, 41, 59, 0.9); display: flex; justify-content: space-between; align-items: center; border-radius: 12px; border: 1px solid #334155;">
      <h1 style="font-size: 18px; font-weight: 900; text-transform: uppercase; margin: 0; color: white;">Novo Depósito</h1>
      <button (click)="goBackToDashboard()" style="background: #4f46e5; color: white; border-radius: 8px; padding: 8px 16px; border: none; cursor: pointer; font-weight: 900;">
        VOLTAR
      </button>
    </div>
  </div>

  <div style="flex-grow: 1; display: flex; align-items: center; justify-content: center; padding: 16px;">
    
    <mat-card *ngIf="!isLoading && !showPixScreen" 
              style="background: #020617; border: 1px solid #475569; border-radius: 20px; padding: 32px; width: 100%; max-width: 400px; box-shadow: 0 25px 50px rgba(0,0,0,0.5);">
      <div style="text-align: center; margin-bottom: 24px;">
        <mat-icon style="font-size: 48px; width: 48px; height: 48px; color: #10b981;">account_balance_wallet</mat-icon>
        <h2 style="font-weight: 900; text-transform: uppercase; color: white;">Adicionar Crédito</h2>
      </div>

      <form [formGroup]="depositoForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-6">
        <div style="background: #1e293b; padding: 20px; border-radius: 12px; border: 2px solid #334155;">
          <label style="color: #94a3b8; font-size: 11px; font-weight: 900; text-transform: uppercase; display: block; margin-bottom: 8px;">Valor do Depósito</label>
          <div style="display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 24px; font-weight: 900; color: #10b981;">R$</span>
            <input type="number" formControlName="valor" placeholder="0.00" min="1" 
                   oninput="if(this.value < 0) this.value = 0;"
                   style="width: 100%; background: transparent; border: none; color: white; font-size: 32px; font-weight: 900; outline: none;">
          </div>
        </div>
        <button type="submit" [disabled]="depositoForm.invalid"
          style="width: 100%; padding: 18px; background: #059669; color: white; font-weight: 900; text-transform: uppercase; border-radius: 12px; border: none; cursor: pointer;">
          GERAR PIX
        </button>
      </form>
    </mat-card>

    <mat-card *ngIf="!isLoading && showPixScreen" 
              style="background: #020617; border: 1px solid #475569; border-radius: 20px; padding: 24px; width: 100%; max-width: 450px; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5);">
      <div style="background: #334155; margin: -24px -24px 24px -24px; padding: 16px; border-radius: 20px 20px 0 0; border-bottom: 1px solid #475569;">
         <h2 style="font-weight: 900; text-transform: uppercase; margin: 0; color: white;">Pague com PIX</h2>
      </div>

      <div style="background: white; padding: 15px; border-radius: 16px; display: inline-block; margin: 15px 0; border: 4px solid #ef4444;">
        <img *ngIf="pixResponse?.qrCodeBase64" [src]="pixResponse?.qrCodeBase64" style="width: 200px; height: 200px; display: block;">
        <div *ngIf="!pixResponse?.qrCodeBase64" style="width: 200px; height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #fee2e2; color: #b91c1c;">
          <mat-icon style="font-size: 64px; width: 64px; height: 64px;">qr_code_2</mat-icon>
          <span style="font-weight: 900;">QR CODE SIMULADO</span>
        </div>
      </div>

      <p style="color: #ef4444; font-size: 11px; font-weight: 900; text-transform: uppercase; margin-bottom: 20px;">⚠️ Simulação de Teste</p>

      <div class="flex flex-col gap-3">
        <button (click)="simularPagamento()" style="width: 100%; padding: 16px; background: #10b981; color: white; font-weight: 900; border-radius: 12px; border: none; cursor: pointer;">
          CONFIRMAR PAGAMENTO
        </button>
        <button (click)="showPixScreen = false" style="width: 100%; padding: 12px; background: transparent; color: #94a3b8; font-weight: 700; border: 1px solid #334155; border-radius: 12px; cursor: pointer;">
          CANCELAR
        </button>
      </div>
    </mat-card>

  </div>

  <div *ngIf="isLoading" style="position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <mat-spinner color="accent"></mat-spinner>
  </div>
</div>